---
title: Przywracanie pakietu NuGet | Dokumentacja firmy Microsoft
author: kraigb
ms.author: kraigb
manager: ghogen
ms.date: 03/16/2018
ms.topic: article
ms.prod: nuget
ms.technology: ''
description: Przegląd sposobu NuGet przywraca pakietów, od których jest zależna projektu, w tym jak wyłączyć przywracania i ograniczyć wersji.
keywords: Przywracanie pakietu NuGet, instalacja pakietu NuGet, instalowanie pakietu Przywracanie pakietów, wersje zależności, wyłączenie automatycznego przywracania ograniczający wersji pakietu
ms.reviewer:
- karann-msft
- unniravindranathan
ms.workload:
- dotnet
- aspnet
ms.openlocfilehash: d5c9c9f571ea25f8877f78c3fba114562d31fcd8
ms.sourcegitcommit: beb229893559824e8abd6ab16707fd5fe1c6ac26
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/28/2018
---
# <a name="package-restore"></a><span data-ttu-id="594ee-104">Przywracanie pakietu</span><span class="sxs-lookup"><span data-stu-id="594ee-104">Package Restore</span></span>

<span data-ttu-id="594ee-105">Aby promować czyszczący Środowisko deweloperskie i zmniejszyć rozmiar repozytorium NuGet **przywracania pakietów** instaluje zależności projektu wszystkie wymienione w jednym pliku projektu lub `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="594ee-105">To promote a cleaner development environment and to reduce repository size, NuGet **Package Restore** installs all a project's dependencies as listed in either the project file or `packages.config`.</span></span> <span data-ttu-id="594ee-106">Visual Studio można przywrócić pakietów automatycznie, podczas tworzenia projektu.</span><span class="sxs-lookup"><span data-stu-id="594ee-106">Visual Studio can restore packages automatically when a project is built.</span></span> <span data-ttu-id="594ee-107">`dotnet build` i `dotnet run` przywracania automatycznie przeprowadzić poleceń (.NET Core 2.0 +).</span><span class="sxs-lookup"><span data-stu-id="594ee-107">The `dotnet build` and `dotnet run` commands (.NET Core 2.0+) also perform an automatic restore.</span></span> <span data-ttu-id="594ee-108">Można także przywrócić pakiety w dowolnej chwili za pomocą programu Visual Studio, `nuget restore`, `dotnet restore`i xbuild na Mono.</span><span class="sxs-lookup"><span data-stu-id="594ee-108">You can also restore packages at any time through Visual Studio, `nuget restore`, `dotnet restore`, and xbuild on Mono.</span></span>

<span data-ttu-id="594ee-109">Przywracanie pakietu upewnia się, że projektu wszystkie zależności są dostępne bez przechowywania tych pakietów w kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="594ee-109">Package restore makes sure that all a project's dependencies are available without storing those packages in source control.</span></span> <span data-ttu-id="594ee-110">Zobacz [pakietów i kontroli źródła](../consume-packages/packages-and-source-control.md) na temat konfigurowania repozytorium, aby wykluczyć pliki binarne pakietu.</span><span class="sxs-lookup"><span data-stu-id="594ee-110">See [Packages and Source Control](../consume-packages/packages-and-source-control.md) on how to configure your repository to exclude package binaries.</span></span>

## <a name="package-restore-overview"></a><span data-ttu-id="594ee-111">Omówienie przywracania pakietu</span><span class="sxs-lookup"><span data-stu-id="594ee-111">Package restore overview</span></span>

<span data-ttu-id="594ee-112">Trwa przywracanie pakietów najpierw instaluje bezpośrednich zależności projektu, w razie potrzeby, a następnie instaluje wszystkie zależności tych pakietów w całym na wykresie zależności całego.</span><span class="sxs-lookup"><span data-stu-id="594ee-112">Restoring packages first installs the direct dependencies of a project as needed, then installs any dependencies of those packages throughout the entire dependency graph.</span></span>

<span data-ttu-id="594ee-113">Jeśli pakiet nie jest już zainstalowany, NuGet najpierw próbuje pobrać go z [pamięci podręcznej](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="594ee-113">If a package is not already installed, NuGet first attempts to retrieve it from the [cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span> <span data-ttu-id="594ee-114">Jeśli pakiet nie jest w pamięci podręcznej, NuGet następnie próbuje pobrać pakiet ze wszystkich źródeł włączone (zobacz [NuGet Konfigurowanie zachowania](Configuring-NuGet-Behavior.md); źródła są również wyświetlane w **Narzędzia > Opcje > Menedżera pakietów NuGet > Źródła pakietów** listy w programie Visual Studio).</span><span class="sxs-lookup"><span data-stu-id="594ee-114">If the package is not in the cache, NuGet then attempts to download the package from all enabled sources (see [Configuring NuGet behavior](Configuring-NuGet-Behavior.md); sources also appear in the  **Tools > Options > NuGet Package Manager > Package Sources** list in Visual Studio).</span></span> <span data-ttu-id="594ee-115">Podczas przywracania NuGet ignoruje kolejność źródeł pakietów przy użyciu pakietu z dowolną wskazaną źródło jest najpierw odpowiadać na żądania.</span><span class="sxs-lookup"><span data-stu-id="594ee-115">During restore, NuGet ignores the order of package sources, using the package from whichever source is first to respond to requests.</span></span>

> [!Note]
> <span data-ttu-id="594ee-116">NuGet nie wskazuje niepowodzenie przywracania pakietu, dopóki wszystkie źródła zostały sprawdzone.</span><span class="sxs-lookup"><span data-stu-id="594ee-116">NuGet does not indicate a failure to restore a package until all the sources have been checked.</span></span> <span data-ttu-id="594ee-117">W tym czasie program NuGet zgłasza błąd tylko ostatni źródła na liście.</span><span class="sxs-lookup"><span data-stu-id="594ee-117">At that time, NuGet reports a failure for only the last source in the list.</span></span> <span data-ttu-id="594ee-118">Ten błąd oznacza, że pakiet nie był dostępny na *żadnych* z innych źródeł, mimo że błędy nie są wyświetlane dla każdego z tych źródeł pojedynczo.</span><span class="sxs-lookup"><span data-stu-id="594ee-118">The error implies that the package wasn't present on *any* of the other sources, even though errors are not shown for each of those sources individually.</span></span>

<span data-ttu-id="594ee-119">Przywracanie pakietu zostanie wywołany w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="594ee-119">Package restore is triggered in the following ways:</span></span>

- <span data-ttu-id="594ee-120">**DotNet CLI**: Użyj [przywracania dotnet](/dotnet/core/tools/dotnet-restore?tabs=netcore2x) polecenia, które przywraca pakiety wymienione w pliku projektu (zobacz [PackageReference](../consume-packages/package-references-in-project-files.md)).</span><span class="sxs-lookup"><span data-stu-id="594ee-120">**dotnet CLI**: use the [dotnet restore](/dotnet/core/tools/dotnet-restore?tabs=netcore2x) command, which restores packages listed in the project file (see [PackageReference](../consume-packages/package-references-in-project-files.md)).</span></span> <span data-ttu-id="594ee-121">.NET Core 2.0 lub nowszy, przywracania odbywają się automatycznie z `dotnet build` i `dotnet run`.</span><span class="sxs-lookup"><span data-stu-id="594ee-121">With .NET Core 2.0 and later, restore is done automatically with `dotnet build` and `dotnet run`.</span></span>

- <span data-ttu-id="594ee-122">**Interfejs użytkownika Menedżera pakietów (Visual Studio w systemie Windows)**: pakiety zostaną przywrócone automatycznie podczas tworzenia projektu z szablonu i podczas kompilowania projektu (może ulec opcja opisana w [Włączanie i wyłączanie pakietu przywrócić](#enabling-and-disabling-package-restore)).</span><span class="sxs-lookup"><span data-stu-id="594ee-122">**Package Manager UI (Visual Studio on Windows)**: Packages are restored automatically when creating a project from a template and when building a project (subject to the option described in [Enabling and disabling package restore](#enabling-and-disabling-package-restore)).</span></span> <span data-ttu-id="594ee-123">W NuGet 4.0 + przywracania również odbywa się automatycznie po wprowadzeniu zmian projekt na podstawie zestawu SDK programu .NET Core.</span><span class="sxs-lookup"><span data-stu-id="594ee-123">In NuGet 4.0+, restore also happens automatically when changes are made to a .NET Core SDK-based project.</span></span>

    <span data-ttu-id="594ee-124">Aby przywrócić ręcznie, kliknij prawym przyciskiem myszy rozwiązanie w Eksploratorze rozwiązań i wybierz **przywracania pakietów NuGet**.</span><span class="sxs-lookup"><span data-stu-id="594ee-124">To restore manually, right-click the solution in Solution Explorer and select **Restore NuGet Packages**.</span></span> <span data-ttu-id="594ee-125">Jeśli co najmniej jeden indywidualne pakiety są nadal nie jest poprawnie zainstalowany (co oznacza, że Eksplorator rozwiązań zawiera ikony błędu), a następnie użyj interfejsu użytkownika Menedżera pakietu na odinstalowanie i ponowne zainstalowanie odpowiednich pakietów.</span><span class="sxs-lookup"><span data-stu-id="594ee-125">If one or more individual packages are still not installed properly (meaning that Solution Explorer shows an error icon), then use the Package Manager UI to uninstall and reinstall the affected packages.</span></span> <span data-ttu-id="594ee-126">Zobacz [ponowne zainstalowanie i aktualizowanie pakietów](../consume-packages/reinstalling-and-updating-packages.md)</span><span class="sxs-lookup"><span data-stu-id="594ee-126">See [Reinstalling and updating packages](../consume-packages/reinstalling-and-updating-packages.md)</span></span>

    <span data-ttu-id="594ee-127">Jeśli zostanie wyświetlony błąd "ten projekt zawiera odwołania do pakietów NuGet, na tym komputerze brakuje" lub "co najmniej jednego pakietu NuGet konieczne jest przywrócenie, ale nie może być, ponieważ nie udzielono zgody", należy włączyć automatyczne przywracanie zgodnie z instrukcjami w obszarze [Włączanie i wyłączanie Przywracanie pakietu](#enabling-and-disabling-package-restore).</span><span class="sxs-lookup"><span data-stu-id="594ee-127">If you see the error "This project references NuGet package(s) that are missing on this computer" or "One or more NuGet packages need to be restored but couldn't be because consent has not been granted," turn on automatic restore by following the instructions under [Enabling and disabling package restore](#enabling-and-disabling-package-restore).</span></span> <span data-ttu-id="594ee-128">Zobacz też [Rozwiązywanie problemów z przywracania pakietu](Package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="594ee-128">Also see [Package restore troubleshooting](Package-restore-troubleshooting.md).</span></span>

- <span data-ttu-id="594ee-129">**Interfejs wiersza polecenia NuGet**: Użyj [Przywracanie nuget](../tools/cli-ref-restore.md) polecenia, które przywraca pakiety wymienione w pliku projektu lub w `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="594ee-129">**NuGet CLI**: use the [nuget restore](../tools/cli-ref-restore.md) command, which restores packages listed in the project file or in `packages.config`.</span></span> <span data-ttu-id="594ee-130">Można również określić plik rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="594ee-130">You can also specify a solution file.</span></span>

- <span data-ttu-id="594ee-131">**MSBuild**: Użyj [msbuild /t:restore](../reference/msbuild-targets.md#restore-target) poleceń, które przywraca pakietów pakiety wymienione w pliku projektu (tylko PackageReference).</span><span class="sxs-lookup"><span data-stu-id="594ee-131">**MSBuild**: use the [msbuild /t:restore](../reference/msbuild-targets.md#restore-target) command, which restores packages packages listed in the project file (PackageReference only).</span></span> <span data-ttu-id="594ee-132">Dostępne tylko w NuGet 4.x+ i MSBuild 15.1 +, które są dołączone do programu Visual Studio 2017 r.</span><span class="sxs-lookup"><span data-stu-id="594ee-132">Available only in NuGet 4.x+ and MSBuild 15.1+, which are included with Visual Studio 2017.</span></span> <span data-ttu-id="594ee-133">`nuget restore` i `dotnet restore` dla projektów dotyczy zarówno Użyj tego polecenia.</span><span class="sxs-lookup"><span data-stu-id="594ee-133">`nuget restore` and `dotnet restore` both use this command for applicable projects.</span></span>

- <span data-ttu-id="594ee-134">**Visual Studio Team Services**: podczas tworzenia definicji kompilacji na Team Services, obejmują [Przywracanie NuGet](/vsts/build-release/tasks/package/nuget#restore-nuget-packages) lub [.NET Core przywrócić](/vsts/build-release/tasks/build/dotnet-core#restore-nuget-packages) zadania w definicji przed żadnego zadania kompilacji.</span><span class="sxs-lookup"><span data-stu-id="594ee-134">**Visual Studio Team Services**: When creating a build definition on Team Services, include the [NuGet restore](/vsts/build-release/tasks/package/nuget#restore-nuget-packages) or [.NET Core Restore](/vsts/build-release/tasks/build/dotnet-core#restore-nuget-packages) task in the definition before any build task.</span></span> <span data-ttu-id="594ee-135">To zadanie jest domyślnie włączone w szablony kompilacji.</span><span class="sxs-lookup"><span data-stu-id="594ee-135">This task is included by default in a number of build templates.</span></span>

- <span data-ttu-id="594ee-136">**Team Foundation Server**: TFS 2013 lub nowszym automatycznie przywraca pakietów podczas kompilacji, pod warunkiem, że używasz kompilacji szablonu Team TFS 2013 lub nowszym.</span><span class="sxs-lookup"><span data-stu-id="594ee-136">**Team Foundation Server**: TFS 2013 and later automatically restores packages during build, provided that you're using a Team Build Template for TFS 2013 or later.</span></span> <span data-ttu-id="594ee-137">Dla wcześniejszych wersji programu TFS mogą obejmować kroku kompilacji, aby wywołać za pomocą jednego z powyższych opcji wiersza polecenia przywracania.</span><span class="sxs-lookup"><span data-stu-id="594ee-137">For earlier version of TFS, you can include a build step to invoke one of the command-line restore options above.</span></span> <span data-ttu-id="594ee-138">Opcjonalnie można przenieść szablonu kompilacji TFS 2013.</span><span class="sxs-lookup"><span data-stu-id="594ee-138">You can optionally migrate the build template to TFS 2013.</span></span> <span data-ttu-id="594ee-139">Aby uzyskać więcej informacji, zobacz [wskazówki dotyczące przywracania pakietu z Team Foundation Build](../consume-packages/team-foundation-build.md).</span><span class="sxs-lookup"><span data-stu-id="594ee-139">For more information, see the [Walkthrough of package restore with Team Foundation Build](../consume-packages/team-foundation-build.md).</span></span>

## <a name="enabling-and-disabling-package-restore"></a><span data-ttu-id="594ee-140">Włączanie i wyłączanie przywracania pakietu</span><span class="sxs-lookup"><span data-stu-id="594ee-140">Enabling and disabling package restore</span></span>

<span data-ttu-id="594ee-141">Przywracanie pakietu głównie jest włączany za pomocą **Narzędzia > Opcje > Menedżera pakietów NuGet** w programie Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="594ee-141">Package restore is primarily enabled through **Tools > Options > NuGet Package Manager** in Visual Studio:</span></span>

![Kontrolowanie zachowania przywracania pakietu za pomocą opcji Menedżera pakietów NuGet](media/Restore-01-AutoRestoreOptions.png)

- <span data-ttu-id="594ee-143">**Zezwalaj narzędziu NuGet na pobieranie brakujących pakietów**: Określa wszystkich formularzy Przywracanie pakietu, zmieniając `packageRestore/enabled` w `NuGet.Config` plików, jak pokazano poniżej (`%AppData%\NuGet\NuGet.Config` w systemie Windows, `~/.nuget/NuGet/NuGet.Config` na system Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="594ee-143">**Allow NuGet to download missing packages**: controls all forms of package restore by changing the `packageRestore/enabled` setting in the `NuGet.Config` file as shown below (`%AppData%\NuGet\NuGet.Config` on Windows, `~/.nuget/NuGet/NuGet.Config` on Mac/Linux).</span></span> <span data-ttu-id="594ee-144">W programie Visual Studio, to ustawienie umożliwia **przywracania pakietów NuGet** polecenia w menu kontekstowym rozwiązania do pracy.</span><span class="sxs-lookup"><span data-stu-id="594ee-144">In Visual Studio, this setting allows the **Restore NuGet Packages** command on the solution's context menu to work.</span></span>

    ```xml
    <configuration>
        <packageRestore>
            <!-- The 'enabled' key is True when the "Allow NuGet to download missing packages" checkbox is set.
                 Clearing the box sets this to False, disabling command-line, automatic, and MSBuild-Integrated restore. -->
            <add key="enabled" value="True" />
        </packageRestore>
    </configuration>
    ```
    <br/>
    > [!Note]
    >  <span data-ttu-id="594ee-145">`packageRestore/enabled` Ustawienie można zastąpić globalny, ustawiając zmienną środowiskową o nazwie **EnableNuGetPackageRestore** o wartości TRUE lub FALSE przed uruchomieniem programu Visual Studio lub uruchamianie kompilacji.</span><span class="sxs-lookup"><span data-stu-id="594ee-145">The `packageRestore/enabled` setting can be overridden globally by setting an environment variable called **EnableNuGetPackageRestore** with a value of TRUE or FALSE before launching Visual Studio or starting a build.</span></span>

- <span data-ttu-id="594ee-146">**Automatyczne sprawdzenie dostępności dla brakujących pakietów podczas kompilacji w programie Visual Studio**: Określa przywracania automatycznie, zmieniając `packageRestore/automatic` w `NuGet.Config` plików, jak pokazano poniżej (`%AppData%\NuGet\NuGet.Config` w systemie Windows, `~/.nuget/NuGet/NuGet.Config` na system Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="594ee-146">**Automatically check for missing packages during build in Visual Studio**: controls automatic restore by changing the `packageRestore/automatic` setting in the `NuGet.Config` file as shown below (`%AppData%\NuGet\NuGet.Config` on Windows, `~/.nuget/NuGet/NuGet.Config` on Mac/Linux).</span></span> <span data-ttu-id="594ee-147">Gdy ta opcja jest ustawiona, uruchamianie kompilacji w programie Visual Studio automatycznie przywraca wszystkie brakujące pakiety.</span><span class="sxs-lookup"><span data-stu-id="594ee-147">When this option is set, running a build from Visual Studio automatically restores any missing packages.</span></span> <span data-ttu-id="594ee-148">Opcja nie ma wpływu na kompilacje uruchomić z wiersza polecenia przy użyciu programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="594ee-148">The option does not affect builds run from the command line using MSBuild.</span></span>

    ```xml
    ...
    <configuration>
        <packageRestore>
            <!-- The 'automatic' key is set to True when the "Automatically check for missing packages during
                 build in Visual Studio" checkbox is set. Clearing the box sets this to False and disables
                 automatic restore. -->
            <add key="automatic" value="True" />
        </packageRestore>
    </configuration>
    ```

<span data-ttu-id="594ee-149">Aby informacje, zobacz [NuGet pliku konfiguracji - sekcji packageRestore](../reference/nuget-config-file.md#packagerestore-section).</span><span class="sxs-lookup"><span data-stu-id="594ee-149">For reference, see the [NuGet config file - packageRestore section](../reference/nuget-config-file.md#packagerestore-section).</span></span>

<span data-ttu-id="594ee-150">W niektórych przypadkach włączyć lub wyłączyć Przywracanie pakietów dla wszystkich użytkowników na komputerze może być deweloperem lub firmy.</span><span class="sxs-lookup"><span data-stu-id="594ee-150">In some cases, a developer or company might want to enable or disable package restore for all users on a computer.</span></span> <span data-ttu-id="594ee-151">Aby to zrobić, należy dodać tych samych ustawień powyżej do globalnych znajduje się w pliku konfiguracji w NuGet `%ProgramData%\NuGet\Config` (Windows potencjalnie w obszarze określonej `\{IDE}\{Version}\{SKU}\` folderu dla programu Visual Studio) lub `~/.local/share` (system Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="594ee-151">To do this, add the same settings above to the global NuGet configuration file located in `%ProgramData%\NuGet\Config` (Windows, potentially under a specific `\{IDE}\{Version}\{SKU}\` folder for Visual Studio) or `~/.local/share` (Mac/Linux).</span></span> <span data-ttu-id="594ee-152">Poszczególnym użytkownikom można selektywnie włączysz przywracania na poziomie projektu.</span><span class="sxs-lookup"><span data-stu-id="594ee-152">Individual users can then selectively enable restore as needed on a project level.</span></span> <span data-ttu-id="594ee-153">Zobacz [NuGet Konfigurowanie zachowania](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied) dokładne szczegółowe informacje na temat sposobu NuGet priorytetem wiele plików konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="594ee-153">See [Configuring NuGet behavior](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied) for exact details on how NuGet prioritizes multiple config files.</span></span>

> [!Important]
> <span data-ttu-id="594ee-154">Po zmodyfikowaniu `packageRestore` ustawienia bezpośrednio w `nuget.config`, uruchom ponownie program Visual Studio, opcje — Okno dialogowe zawiera bieżące wartości.</span><span class="sxs-lookup"><span data-stu-id="594ee-154">If you edit the `packageRestore` settings directly in `nuget.config`, restart Visual Studio so that the options dialog box shows the current values.</span></span>

## <a name="constraining-package-versions-with-restore"></a><span data-ttu-id="594ee-155">Ograniczający wersje pakietu z przywracania</span><span class="sxs-lookup"><span data-stu-id="594ee-155">Constraining package versions with restore</span></span>

<span data-ttu-id="594ee-156">Podczas przywracania pakietów przy użyciu dowolnej metody, NuGet honoruje żadnych ograniczeń określone w `packages.config` lub pliku projektu:</span><span class="sxs-lookup"><span data-stu-id="594ee-156">When restoring packages through any method, NuGet honors any constraints specified in `packages.config` or the project file:</span></span>

- <span data-ttu-id="594ee-157">`packages.config`: Określ zakres wersji w `allowedVersion` właściwości zależności.</span><span class="sxs-lookup"><span data-stu-id="594ee-157">`packages.config`: Specify a version range in the `allowedVersion` property of the dependency.</span></span> <span data-ttu-id="594ee-158">Zobacz [ponowne zainstalowanie i aktualizowanie pakietów](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions).</span><span class="sxs-lookup"><span data-stu-id="594ee-158">See [Reinstalling and updating packages](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions).</span></span> <span data-ttu-id="594ee-159">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="594ee-159">For example:</span></span>

    ```xml
    <package id="Newtonsoft.json" version="6.0.4" allowedVersions="[6,7)" />
    ```

- <span data-ttu-id="594ee-160">Plik projektu (PackageReference): Określ zakres wersji bezpośrednio z numerem wersji tych zależności.</span><span class="sxs-lookup"><span data-stu-id="594ee-160">Project file (PackageReference): Specify a version range directly with the dependency's version number.</span></span> <span data-ttu-id="594ee-161">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="594ee-161">For example:</span></span>

    ```xml
    <PackageReference Include="Newtonsoft.json" Version="[6, 7)" />
    ```

<span data-ttu-id="594ee-162">We wszystkich przypadkach Notacja opisanego w [wersji pakietu](../reference/package-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="594ee-162">In all cases, use the notation described in [Package versioning](../reference/package-versioning.md).</span></span>

## <a name="forcing-restore-from-package-sources"></a><span data-ttu-id="594ee-163">Wymuszanie przywracania ze źródeł pakietów</span><span class="sxs-lookup"><span data-stu-id="594ee-163">Forcing restore from package sources</span></span>

<span data-ttu-id="594ee-164">Domyślnie operacje przywracania NuGet korzystają z pakietu z *globalne pakietów* i *http pamięci podręcznej* foldery, które są opisane na [Zarządzanie globalne pakietów i pamięci podręcznej folderów](managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="594ee-164">By default, NuGet restore operations use packages from the *global-packages* and *http-cache* folders, which are described on [Managing the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

<span data-ttu-id="594ee-165">Aby uniknąć używania *globalne pakiety* folder, wykonaj jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="594ee-165">To avoid using the *global-packages* folder, do one of the following:</span></span>

- <span data-ttu-id="594ee-166">Wyczyść folderu przy użyciu `nuget locals global-packages -clear` lub `dotnet nuget locals global-packages --clear`</span><span class="sxs-lookup"><span data-stu-id="594ee-166">Clear the folder using `nuget locals global-packages -clear` or `dotnet nuget locals global-packages --clear`</span></span>
- <span data-ttu-id="594ee-167">Tymczasowo zmienić lokalizację *globalne pakiety* folderu przed wykonaniem operacji przywracania przy użyciu jednej z następujących metod:</span><span class="sxs-lookup"><span data-stu-id="594ee-167">Temporarily change the location of the *global-packages* folder before the restore operation using one of the following methods:</span></span>
  - <span data-ttu-id="594ee-168">Ustaw zmienną środowiskową NUGET_PACKAGES do innego folderu.</span><span class="sxs-lookup"><span data-stu-id="594ee-168">Set the NUGET_PACKAGES environment variable to a different folder.</span></span>
  - <span data-ttu-id="594ee-169">Utwórz `NuGet.Config` pliku, który ustawia `globalPackagesFolder` (jeśli jest używana PackageReference) lub `repositoryPath` (Jeśli za pomocą `packages.config`) do innego folderu (zobacz [ustawienia konfiguracji](../reference/nuget-config-file.md#config-section)</span><span class="sxs-lookup"><span data-stu-id="594ee-169">Create a `NuGet.Config` file that sets `globalPackagesFolder` (if using PackageReference) or `repositoryPath` (if using `packages.config`) to a different folder (see [configuration settings](../reference/nuget-config-file.md#config-section)</span></span>
  - <span data-ttu-id="594ee-170">Tylko MSBuild: Określ inny folder o `RestorePackagesPath` właściwości.</span><span class="sxs-lookup"><span data-stu-id="594ee-170">MSBuild only: specify a different folder with the `RestorePackagesPath` property.</span></span>

<span data-ttu-id="594ee-171">Aby uniknąć przy użyciu pamięci podręcznej dla źródeł protokołu HTTP, wykonaj jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="594ee-171">To avoid using the cache for HTTP sources, do one of the following:</span></span>

- <span data-ttu-id="594ee-172">Użyj `-NoCache` opcję z `nuget restore` lub `--no-cache` opcję z `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="594ee-172">Use the `-NoCache` option with `nuget restore` or the `--no-cache` option with `dotnet restore`.</span></span> <span data-ttu-id="594ee-173">Te opcje nie wpływają na operacje przywracania za pomocą programu Visual Studio interfejs użytkownika Menedżera pakietów lub konsoli.</span><span class="sxs-lookup"><span data-stu-id="594ee-173">These options do not affect restore operations through the Visual Studio Package Manager UI or Console.</span></span>
- <span data-ttu-id="594ee-174">Usuń zaznaczenie przy użyciu pamięci podręcznej `nuget locals http-cache -clear` lub `dotnet nuget locals http-cache --clear`.</span><span class="sxs-lookup"><span data-stu-id="594ee-174">Clear the cache using `nuget locals http-cache -clear` or `dotnet nuget locals http-cache --clear`.</span></span>
- <span data-ttu-id="594ee-175">Tymczasowo ustawić zmiennej środowiskowej NUGET_HTTP_CACHE_PATH do innego folderu.</span><span class="sxs-lookup"><span data-stu-id="594ee-175">Temporarily set of the NUGET_HTTP_CACHE_PATH environment variable to a different folder.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="594ee-176">Rozwiązywanie problemów</span><span class="sxs-lookup"><span data-stu-id="594ee-176">Troubleshooting</span></span>

<span data-ttu-id="594ee-177">Zobacz [Rozwiązywanie problemów z Przywracanie pakietu](package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="594ee-177">See [Troubleshooting package restore](package-restore-troubleshooting.md).</span></span>